# QuizBot ‚Äî –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è Claude Code

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞

Telegram-–±–æ—Ç + –≤–µ–±-—Å–µ—Ä–≤–∏—Å –¥–ª—è –∫–æ–º–∞–Ω–¥–Ω—ã—Ö –∫–≤–∏–∑–æ–≤ –Ω–∞ —Å–≤–∞–¥—å–±–∞—Ö –∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö.

- **–í–µ–¥—É—â–∏–π** —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏–≥—Ä–æ–π —á–µ—Ä–µ–∑ Web Admin
- **–ö–∞–ø–∏—Ç–∞–Ω—ã –∫–æ–º–∞–Ω–¥** –æ—Ç–≤–µ—á–∞—é—Ç —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç
- **–ó—Ä–∏—Ç–µ–ª–∏** —Å–ª–µ–¥—è—Ç —á–µ—Ä–µ–∑ TV-—Ä–µ–∂–∏–º –Ω–∞ –±–æ–ª—å—à–æ–º —ç–∫—Ä–∞–Ω–µ (1920√ó1080)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø—Ä–∏–Ω—Ü–∏–ø:** Backend ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã. –í—Å—è –ª–æ–≥–∏–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –∫–ª–∏–µ–Ω—Ç—ã —Ç–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç –∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –≤–≤–æ–¥.

---

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **Backend:** Node.js (Fastify) + PostgreSQL + Redis
- **Telegram Bot:** Telegraf.js
- **Web Admin / TV:** React + Vite + Tailwind CSS
- **Real-time:** WebSocket (ws –∏–ª–∏ Socket.io)
- **–ú–µ–¥–∏–∞:** –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —á–µ—Ä–µ–∑ Fastify Static
- **LLM:** Gemini Flash API (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ)
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** Docker Compose

---

## –≠—Ç–∞–ø 1 ‚Äî Backend + –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

> **–¶–µ–ª—å:** –†–∞–±–æ—á–∏–π API-—Å–µ—Ä–≤–µ—Ä —Å –ë–î –∏ WebSocket. –ë–µ–∑ —ç—Ç–æ–≥–æ –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è.

### 1.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞–π –º–æ–Ω–æ—Ä–µ–ø–æ:
```
quizbot/
‚îú‚îÄ‚îÄ backend/          # Node.js API
‚îú‚îÄ‚îÄ frontend-admin/   # Web Admin (React)
‚îú‚îÄ‚îÄ frontend-tv/      # TV-—Ä–µ–∂–∏–º (React)
‚îú‚îÄ‚îÄ docker-compose.yml
‚îî‚îÄ‚îÄ PLAN.md
```

### 1.2 –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)

–°–æ–∑–¥–∞–π –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü:

```sql
-- –ö–≤–∏–∑—ã
quizzes(id, title, status [draft|active|finished], created_at)

-- –í–æ–ø—Ä–æ—Å—ã
questions(id, quiz_id, order_num, text, options jsonb, correct_answer, time_limit_sec default 30)

-- –°–ª–∞–π–¥—ã –≤–æ–ø—Ä–æ—Å–∞ (3 —Å–ª–∞–π–¥–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å)
slides(id, question_id, type [question|timer|answer], image_url, video_url)

-- –ö–æ–º–∞–Ω–¥—ã / –∫–∞–ø–∏—Ç–∞–Ω—ã
teams(id, quiz_id, name, telegram_chat_id, is_kicked boolean default false, registered_at)

-- –û—Ç–≤–µ—Ç—ã
answers(id, question_id, team_id, answer_text, submitted_at)

-- –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
game_state(id, quiz_id, current_question_id, current_slide [question|timer|answer], timer_started_at, status)
```

### 1.3 REST API endpoints

–†–µ–∞–ª–∏–∑—É–π —Å–ª–µ–¥—É—é—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã:

```
# –ö–≤–∏–∑—ã
GET    /api/quizzes
POST   /api/quizzes
GET    /api/quizzes/:id
PATCH  /api/quizzes/:id
DELETE /api/quizzes/:id

# –í–æ–ø—Ä–æ—Å—ã
GET    /api/quizzes/:id/questions
POST   /api/quizzes/:id/questions
PATCH  /api/questions/:id
DELETE /api/questions/:id

# –ö–æ–º–∞–Ω–¥—ã
GET    /api/quizzes/:id/teams
DELETE /api/teams/:id (–∫–∏–∫)

# –û—Ç–≤–µ—Ç—ã
GET    /api/questions/:id/answers

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π
POST   /api/game/start        { quiz_id }
POST   /api/game/next-question
POST   /api/game/set-slide    { slide: 'question'|'timer'|'answer' }
POST   /api/game/remind       (—É–≤–µ–¥–æ–º–∏—Ç—å –Ω–µ—Å–¥–∞–≤—à–∏—Ö)
POST   /api/game/finish

# –ú–µ–¥–∏–∞
POST   /api/media/upload      (multipart, ZIP –∏–ª–∏ –æ–¥–∏–Ω–æ—á–Ω—ã–π —Ñ–∞–π–ª)
GET    /api/media/:filename
```

### 1.4 WebSocket —Å–æ–±—ã—Ç–∏—è

–°–µ—Ä–≤–µ—Ä —Ä–∞—Å—Å—ã–ª–∞–µ—Ç –≤—Å–µ–º –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º:

```json
// –°–º–µ–Ω–∞ —Å–ª–∞–π–¥–∞
{ "event": "slide_changed", "data": { "slide": "timer", "question": {...}, "timer_sec": 30 } }

// –ö—Ç–æ —Å–¥–∞–ª –æ—Ç–≤–µ—Ç
{ "event": "answer_submitted", "data": { "team_id": 1, "team_name": "–ö–æ–º–∞–Ω–¥–∞ –ê" } }

// –¢–∞–π–º–µ—Ä –∏—Å—Ç—ë–∫
{ "event": "timer_expired", "data": { "question_id": 5 } }

// –ö–æ–º–∞–Ω–¥–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞
{ "event": "team_registered", "data": { "team": {...} } }

// –ö–æ–º–∞–Ω–¥–∞ –∫–∏–∫–Ω—É—Ç–∞
{ "event": "team_kicked", "data": { "team_id": 1 } }

// –ö–≤–∏–∑ –∑–∞–≤–µ—Ä—à—ë–Ω
{ "event": "quiz_finished", "data": { "results": [...] } }
```

### 1.5 Docker Compose

–ù–∞—Å—Ç—Ä–æ–π `docker-compose.yml` —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏: `postgres`, `redis`, `backend`.
Backend —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 3000. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ `.env`.

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç—Ç–∞–ø–∞ 1

- [ ] `docker compose up` –ø–æ–¥–Ω–∏–º–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- [ ] REST endpoints –æ—Ç–≤–µ—á–∞—é—Ç (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ curl –∏–ª–∏ Postman)
- [ ] WebSocket –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∏ —Ä–∞—Å—Å—ã–ª–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è

---

## –≠—Ç–∞–ø 2 ‚Äî Telegram Bot (–ö–∞–ø–∏—Ç–∞–Ω—ã)

> **–¶–µ–ª—å:** –ö–∞–ø–∏—Ç–∞–Ω –º–æ–∂–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, –ø–æ–ª—É—á–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ç–≤–µ—Ç—ã.

### 2.1 –ö–æ–º–∞–Ω–¥—ã –∏ —Ñ–ª–æ—É

```
/start
  ‚Üí "–ü—Ä–∏–≤–µ—Ç! –í–≤–µ–¥–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–≤–æ–µ–π –∫–æ–º–∞–Ω–¥—ã:"
  ‚Üí [–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ]
  ‚Üí POST /api/teams { name, telegram_chat_id, quiz_id }
  ‚Üí "–ö–æ–º–∞–Ω–¥–∞ ¬´{name}¬ª –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞! ‚úÖ –ñ–¥–∏ –Ω–∞—á–∞–ª–∞ –∫–≤–∏–∑–∞."
```

### 2.2 –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞

–ü—Ä–∏ —Å–æ–±—ã—Ç–∏–∏ `slide_changed` (slide = "question") –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–∞–ø–∏—Ç–∞–Ω–∞–º:

```
‚ùì –í–æ–ø—Ä–æ—Å 3/10

{—Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞}

A) –í–∞—Ä–∏–∞–Ω—Ç 1
B) –í–∞—Ä–∏–∞–Ω—Ç 2
C) –í–∞—Ä–∏–∞–Ω—Ç 3
D) –í–∞—Ä–∏–∞–Ω—Ç 4

–û—Ç–ø—Ä–∞–≤—å –±—É–∫–≤—É –æ—Ç–≤–µ—Ç–∞: A, B, C –∏–ª–∏ D
```

### 2.3 –ü—Ä–∏—ë–º –æ—Ç–≤–µ—Ç–∞

```
–ö–∞–ø–∏—Ç–∞–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: "B"
  ‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –∫–≤–∏–∑ –∞–∫—Ç–∏–≤–µ–Ω, —Å–ª–∞–π–¥ = "timer" –∏–ª–∏ "question", –æ—Ç–≤–µ—Ç –µ—â—ë –Ω–µ —Å–¥–∞–Ω
  ‚Üí POST /api/answers { question_id, team_id, answer_text }
  ‚Üí WebSocket —Å–æ–±—ã—Ç–∏–µ answer_submitted
  ‚Üí –û—Ç–≤–µ—Ç–∏—Ç—å: "–û—Ç–≤–µ—Ç –ø—Ä–∏–Ω—è—Ç ‚úÖ"
```

### 2.4 Edge-cases

- –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç ‚Üí "–¢—ã —É–∂–µ –æ—Ç–≤–µ—Ç–∏–ª –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å ‚úÖ"
- –û—Ç–≤–µ—Ç –∫–æ–≥–¥–∞ –∫–≤–∏–∑ –Ω–µ –Ω–∞—á–∞—Ç ‚Üí "–ö–≤–∏–∑ –µ—â—ë –Ω–µ –Ω–∞—á–∞–ª—Å—è. –ñ–¥–∏ –∫–æ–º–∞–Ω–¥—ã –≤–µ–¥—É—â–µ–≥–æ."
- –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (–Ω–µ A/B/C/D) ‚Üí "–û—Ç–ø—Ä–∞–≤—å –±—É–∫–≤—É: A, B, C –∏–ª–∏ D"
- –ö–æ–º–∞–Ω–¥–∞ –∫–∏–∫–Ω—É—Ç–∞ ‚Üí –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, —É–≤–µ–¥–æ–º–∏—Ç—å: "–¢—ã –±—ã–ª –∏—Å–∫–ª—é—á—ë–Ω –∏–∑ –∏–≥—Ä—ã."

### 2.5 –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ-–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ

–ü—Ä–∏ —Å–æ–±—ã—Ç–∏–∏ `remind` –æ—Ç –≤–µ–¥—É—â–µ–≥–æ ‚Äî –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–µ—Å–¥–∞–≤—à–∏–º:
```
‚è∞ –í–µ–¥—É—â–∏–π –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç: —Å–¥–∞–π –æ—Ç–≤–µ—Ç! –û—Å—Ç–∞–ª–æ—Å—å –º–∞–ª–æ –≤—Ä–µ–º–µ–Ω–∏.
```

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç—Ç–∞–ø–∞ 2

- [ ] `/start` ‚Üí —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –í–æ–ø—Ä–æ—Å –ø—Ä–∏—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–º–µ–Ω–µ —Å–ª–∞–π–¥–∞
- [ ] –û—Ç–≤–µ—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
- [ ] –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è
- [ ] –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---


## –≠—Ç–∞–ø 3 ‚Äî Web Admin (–í–µ–¥—É—â–∏–π)

> **–¶–µ–ª—å:** –ü–æ–ª–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–≤–∏–∑–æ–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ, —Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è.

### 3.1 –°—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**`/` ‚Äî –ì–ª–∞–≤–Ω–∞—è (—Å–ø–∏—Å–æ–∫ –∫–≤–∏–∑–æ–≤)**
- –¢–∞–±–ª–∏—Ü–∞ –∫–≤–∏–∑–æ–≤ (–Ω–∞–∑–≤–∞–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å, –¥–∞—Ç–∞)
- –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å –∫–≤–∏–∑" ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É
- –ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å" ‚Üí –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `/game/:id`

**`/quiz/:id/edit` ‚Äî –†–µ–¥–∞–∫—Ç–æ—Ä –∫–≤–∏–∑–∞**
- –°–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –¥–æ–±–∞–≤–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å/–ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏—Ç—å
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞: —Ç–µ–∫—Å—Ç, –≤–∞—Ä–∏–∞–Ω—Ç—ã A/B/C/D, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç, –≤—Ä–µ–º—è (10‚Äì120 —Å–µ–∫)
- –ü—Ä–∏–≤—è–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫ —Å–ª–∞–π–¥–∞–º (–≤–æ–ø—Ä–æ—Å / —Ç–∞–π–º–µ—Ä / –æ—Ç–≤–µ—Ç)
- –ü–æ–ª–µ YouTube-—Å—Å—ã–ª–∫–∏ –¥–ª—è —Å–ª–∞–π–¥–æ–≤ –≤–æ–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞

**`/game/:id` ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π (–æ—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω –≤–µ–¥—É—â–µ–≥–æ)**

–õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ ‚Äî —Ç–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å:
```
[–í–æ–ø—Ä–æ—Å 3 –∏–∑ 10]
–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞...

[ ‚óÄ –°–ª–∞–π–¥: –í–û–ü–†–û–° ‚ñ∂ ]    ‚Üê –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Å–ª–∞–π–¥–æ–≤

[ ‚è± –¢–∞–π–º–µ—Ä: 30 —Å–µ–∫ ]     ‚Üê —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–ª–∞–π–¥–µ –¢–ê–ô–ú–ï–†

[ ‚Üí –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å ]
```

–ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ ‚Äî —Å—Ç–∞—Ç—É—Å –∫–æ–º–∞–Ω–¥:
```
–ö–æ–º–∞–Ω–¥—ã (8/10 —Å–¥–∞–ª–∏):
‚úÖ –ö–æ–º–∞–Ω–¥–∞ –ê
‚úÖ –ö–æ–º–∞–Ω–¥–∞ –ë
‚è≥ –ö–æ–º–∞–Ω–¥–∞ –í   [–ù–∞–ø–æ–º–Ω–∏—Ç—å]
‚è≥ –ö–æ–º–∞–Ω–¥–∞ –ì   [–ù–∞–ø–æ–º–Ω–∏—Ç—å]
...
[ üì¢ –ù–∞–ø–æ–º–Ω–∏—Ç—å –≤—Å–µ–º –Ω–µ—Å–¥–∞–≤—à–∏–º ]
```

–ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å ‚Äî —Å–ø–∏—Å–æ–∫ –∫–∞–ø–∏—Ç–∞–Ω–æ–≤:
```
–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–ø–∏—Ç–∞–Ω—ã:
[–ö–æ–º–∞–Ω–¥–∞ –ê] [–ö–æ–º–∞–Ω–¥–∞ –ë] [–ö–æ–º–∞–Ω–¥–∞ –í ‚úï] ...
```

### 3.2 Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

- WebSocket –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ `/game/:id`
- –°—Ç–∞—Ç—É—Å "—Å–¥–∞–ª/–Ω–µ —Å–¥–∞–ª" –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø—Ä–∏ —Å–æ–±—ã—Ç–∏–∏ `answer_submitted`
- –ù–æ–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥ –ø–æ—è–≤–ª—è—é—Ç—Å—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

### 3.3 –î–µ–π—Å—Ç–≤–∏—è –≤–µ–¥—É—â–µ–≥–æ ‚Üí API –≤—ã–∑–æ–≤—ã

| –î–µ–π—Å—Ç–≤–∏–µ | API |
|---|---|
| –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–≤–∏–∑ | `POST /api/game/start` |
| –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Å–ª–∞–π–¥ | `POST /api/game/set-slide` |
| –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å | `POST /api/game/next-question` |
| –ù–∞–ø–æ–º–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥–µ | `POST /api/game/remind { team_id }` |
| –ù–∞–ø–æ–º–Ω–∏—Ç—å –≤—Å–µ–º | `POST /api/game/remind` |
| –ö–∏–∫–Ω—É—Ç—å –∫–∞–ø–∏—Ç–∞–Ω–∞ | `DELETE /api/teams/:id` |
| –ó–∞–≤–µ—Ä—à–∏—Ç—å –∫–≤–∏–∑ | `POST /api/game/finish` |

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç—Ç–∞–ø–∞ 3

- [ ] –ö–≤–∏–∑ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è
- [ ] –°–ª–∞–π–¥—ã –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] –°—Ç–∞—Ç—É—Å "—Å–¥–∞–ª/–Ω–µ —Å–¥–∞–ª" –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è live
- [ ] –ö–Ω–æ–ø–∫–∞ "–ù–∞–ø–æ–º–Ω–∏—Ç—å" –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- [ ] –ö–∏–∫ –∫–∞–ø–∏—Ç–∞–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## –≠—Ç–∞–ø 4 ‚Äî Web TV (–ó—Ä–∏—Ç–µ–ª–∏)

> **–¶–µ–ª—å:** –ö—Ä–∞—Å–∏–≤—ã–π full-screen —ç–∫—Ä–∞–Ω –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ—Ä–∞/—Ç–µ–ª–µ–≤–∏–∑–æ—Ä–∞, —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä.

### 4.1 –†–æ—É—Ç—ã

`/tv` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ WebSocket –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã.

### 4.2 –°–ª–∞–π–¥—ã

**–°–ª–∞–π–¥ –í–û–ü–†–û–°:**
```
[—Ñ–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω]
[–µ—Å–ª–∏ –µ—Å—Ç—å –≤–∏–¥–µ–æ ‚Äî YouTube embed –ø–æ–≤–µ—Ä—Ö]
[–Ω–æ–º–µ—Ä –≤–æ–ø—Ä–æ—Å–∞: "–í–æ–ø—Ä–æ—Å 3/10" ‚Äî –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª]
[—Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ ‚Äî –∫—Ä—É–ø–Ω–æ –ø–æ —Ü–µ–Ω—Ç—Ä—É –∏–ª–∏ —Å–Ω–∏–∑—É]
[–≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ A/B/C/D ‚Äî –≤–Ω–∏–∑—É]
```

**–°–ª–∞–π–¥ –¢–ê–ô–ú–ï–†:**
```
[—Ñ–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ]
[–±–æ–ª—å—à–æ–π –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–∞–π–º–µ—Ä –ø–æ —Ü–µ–Ω—Ç—Ä—É]
[–≤–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç: —Ü–≤–µ—Ç –º–µ–Ω—è–µ—Ç—Å—è ‚Äî –∑–µ–ª—ë–Ω—ã–π ‚Üí –∂—ë–ª—Ç—ã–π ‚Üí –∫—Ä–∞—Å–Ω—ã–π]
[–ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏: –∑–≤—É–∫–æ–≤–æ–π –±—É–¥–∏–ª—å–Ω–∏–∫ + –∞–Ω–∏–º–∞—Ü–∏—è –≤—Å–ø—ã—à–∫–∏]
```

**–°–ª–∞–π–¥ –û–¢–í–ï–¢:**
```
[–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –æ–±–æ–∑–Ω–∞—á–µ–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º]
[–µ—Å–ª–∏ –µ—Å—Ç—å –≤–∏–¥–µ–æ-–ø–æ—è—Å–Ω–µ–Ω–∏–µ ‚Äî YouTube embed –ø–æ–≤–µ—Ä—Ö]
[–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –≤—ã–¥–µ–ª–µ–Ω —Ü–≤–µ—Ç–æ–º]
```

**–§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
```
[–ø–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è]
[—Ä–µ–π—Ç–∏–Ω–≥ –∫–æ–º–∞–Ω–¥ —Å –º–µ—Å—Ç–∞–º–∏: ü•áü•àü•â]
[–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã]
[–∫—Ä–∞—Å–∏–≤–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–æ–¥ —Ç–µ–º—É –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è]
```

### 4.3 –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ 1920√ó1080, CSS: `width: 1920px; height: 1080px; transform: scale()`
- –í—Å–µ –º–µ–¥–∏–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ (preload) —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –∑–∞–¥–µ—Ä–∂–µ–∫
- –ó–≤—É–∫ –±—É–¥–∏–ª—å–Ω–∏–∫–∞ ‚Äî Web Audio API (–Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∞–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞)
- –ù–µ—Ç –∫–Ω–æ–ø–æ–∫, –Ω–µ—Ç —Å–∫—Ä–æ–ª–ª–∞, –Ω–µ—Ç –∫—É—Ä—Å–æ—Ä–∞ (`cursor: none`)

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç—Ç–∞–ø–∞ 4

- [ ] TV —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –≤–µ–¥—É—â–µ–≥–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] –¢–∞–π–º–µ—Ä –∞–Ω–∏–º–∏—Ä—É–µ—Ç—Å—è –∏ –∑–≤—É—á–∏—Ç –±—É–¥–∏–ª—å–Ω–∏–∫
- [ ] YouTube-–≤–∏–¥–µ–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–≤–µ—Ä—Ö –∫–∞—Ä—Ç–∏–Ω–∫–∏
- [ ] –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã–≥–ª—è–¥–∏—Ç –∫—Ä–∞—Å–∏–≤–æ
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞ 1920√ó1080

---

## –≠—Ç–∞–ø 5 ‚Äî –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ + LLM-–ø–∞—Ä—Å–∏–Ω–≥

> **–¶–µ–ª—å:** –í–µ–¥—É—â–∏–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç ZIP —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ –∏–∑ Figma ‚Äî –∫–≤–∏–∑ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### 5.1 –ó–∞–≥—Ä—É–∑–∫–∞ ZIP-–∞—Ä—Ö–∏–≤–∞

- –§–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ Web Admin: drag & drop –∏–ª–∏ –∫–Ω–æ–ø–∫–∞
- Backend —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç ZIP, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
- –§–∞–π–ª—ã –∏–º–µ–Ω—É—é—Ç—Å—è –ø–æ —à–∞–±–ª–æ–Ω—É: `q1_question.png`, `q1_timer.png`, `q1_answer.png`

### 5.2 LLM-–ø–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ Gemini Flash

Backend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–∂–¥–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ-–≤–æ–ø—Ä–æ—Å –≤ Gemini Flash —Å –ø—Ä–æ–º–ø—Ç–æ–º:

```
–≠—Ç–æ —Å–ª–∞–π–¥ –∫–≤–∏–∑–∞. –ò–∑–≤–ª–µ–∫–∏:
- —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
- –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ (A, B, C, D)
- –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
- —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –≤—Ä–µ–º—è (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ, –∏–Ω–∞—á–µ 30)

–í–µ—Ä–Ω–∏ —Å—Ç—Ä–æ–≥–æ JSON:
{
  "question": "...",
  "options": { "A": "...", "B": "...", "C": "...", "D": "..." },
  "correct": "B",
  "time_limit_sec": 30
}
```

### 5.3 UI —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø–æ–∫–∞–∑–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
- –ö–∞–∂–¥—ã–π –≤–æ–ø—Ä–æ—Å ‚Äî —Å—Ç—Ä–æ–∫–∞ —Å –ø–æ–ª—è–º–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ‚Äî –ø—Ä–µ–≤—å—é
- –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–≤–∏–∑" ‚Üí —Å–æ–∑–¥–∞—ë—Ç –∫–≤–∏–∑ —á–µ—Ä–µ–∑ API

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç—Ç–∞–ø–∞ 5

- [ ] ZIP –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- [ ] Gemini –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON
- [ ] UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–≤–∏–∑ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ

---