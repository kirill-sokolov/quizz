# –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

## 2026-02-25: –≠—Ç–∞–ø—ã 1-3 + –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### ‚úÖ –≠—Ç–∞–ø 1: –£–¥–∞–ª–µ–Ω–∏–µ OCR
**–¶–µ–ª—å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–±—Ä–∞—Ç—å OCR –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ (—Å–µ—Å—Ç—Ä–∞ –¥–µ–ª–∞–µ—Ç –±–æ–ª–µ–µ —á—ë—Ç–∫–∏–π DOCX).

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- –£–¥–∞–ª—ë–Ω `ocr-service.ts`
- –£–¥–∞–ª—ë–Ω OCR endpoint `/api/quizzes/:id/analyze-zip-ocr`
- –£–¥–∞–ª—ë–Ω OCR UI –∏–∑ `QuizEdit.jsx` (states, handlers, buttons)
- –£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `analyzeZipOcr` –∏–∑ `client.js`
- –£–¥–∞–ª—ë–Ω Tesseract –∏–∑ `Dockerfile`
- –£–±—Ä–∞–Ω–æ debug logging –∏–∑ TV –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–§–∞–π–ª—ã:**
- `apps/api/src/services/ocr-service.ts` ‚Äî DELETED
- `apps/api/src/routes/import.ts` ‚Äî —É–¥–∞–ª—ë–Ω –∏–º–ø–æ—Ä—Ç –∏ endpoint
- `apps/web/src/pages/QuizEdit.jsx` ‚Äî —É–¥–∞–ª—ë–Ω OCR UI –±–ª–æ–∫
- `apps/web/src/api/client.js` ‚Äî —É–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è
- `apps/api/Dockerfile` ‚Äî —É–¥–∞–ª–µ–Ω—ã tesseract –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

---

### ‚úÖ –≠—Ç–∞–ø 2: –£–ª—É—á—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
**–¶–µ–ª—å:** QR –∫–æ–¥ –±–æ–ª—å—à–µ, —É–±—Ä–∞—Ç—å —Ü–∏—Ñ—Ä—ã –∫–æ–º–∞–Ω–¥, —É–ª—É—á—à–∏—Ç—å –¥–∏–∑–∞–π–Ω.

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- QR –∫–æ–¥ —Ç–µ–ø–µ—Ä—å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π: `max-w-[600px]`, `aspect-square`, `max-h-[85vh]`
- –£–¥–∞–ª–µ–Ω—ã –Ω–æ–º–µ—Ä–∞ –∫–æ–º–∞–Ω–¥ `#{idx + 1}`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–∫–æ–Ω–∫–∏ –∫–æ–º–∞–Ω–¥ (–ø–µ—Ä–≤–∞—è –±—É–∫–≤–∞ –≤ –∫—Ä—É–≥–µ)
- –£–ª—É—á—à–µ–Ω –¥–∏–∑–∞–π–Ω: –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã, —Ç–µ–Ω–∏, hover-—ç—Ñ—Ñ–µ–∫—Ç—ã, border-left

**–§–∞–π–ª—ã:**
- `apps/web/src/components/TV/TVLobby.jsx`

---

### ‚úÖ –≠—Ç–∞–ø 3: –£–ª—É—á—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
**–¶–µ–ª—å:** –£–≤–µ–ª–∏—á–∏—Ç—å —à—Ä–∏—Ñ—Ç—ã –≤ 2 —Ä–∞–∑–∞, –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –º–µ—Å—Ç (2‚Üí3‚Üí4‚Üí...‚Üí1).

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- **–£–≤–µ–ª–∏—á–µ–Ω—ã —à—Ä–∏—Ñ—Ç—ã:**
  - –ó–∞–≥–æ–ª–æ–≤–æ–∫: `text-6xl` ‚Üí `text-9xl`
  - –°—Ç—Ä–æ–∫–∏ –∫–æ–º–∞–Ω–¥: `text-3xl` ‚Üí `text-6xl`
  - –ú–µ–¥–∞–ª–∏/–Ω–æ–º–µ—Ä–∞: `text-4xl` ‚Üí `text-8xl`
  - –°—á—ë—Ç: –¥–æ–±–∞–≤–ª–µ–Ω `text-5xl`
- **–ò–∑–º–µ–Ω—ë–Ω –ø–æ—Ä—è–¥–æ–∫ –ø–æ—è–≤–ª–µ–Ω–∏—è:**
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getAnimationDelay(index)`
  - 2 –º–µ—Å—Ç–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º (delay = 0s)
  - 3 –º–µ—Å—Ç–æ ‚Äî —á–µ—Ä–µ–∑ 0.15s
  - 1 –º–µ—Å—Ç–æ ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–º (delay = (N-1) √ó 0.15s)
- –£–ª—É—á—à–µ–Ω–∞ –∞–Ω–∏–º–∞—Ü–∏—è: `opacity-0`, `animationFillMode: 'forwards'`

**–§–∞–π–ª—ã:**
- `apps/web/src/components/TV/TVResults.jsx`

---

### ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è bot username —á–µ—Ä–µ–∑ .env
**–¶–µ–ª—å:** –£–±—Ä–∞—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ `WeddingTest2Bot`, —Å–¥–µ–ª–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–º.

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `TELEGRAM_BOT_USERNAME=PartyQuizBot` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π `.env`
- –û–±–Ω–æ–≤–ª—ë–Ω `docker-compose.yml`:
  - –î–æ–±–∞–≤–ª–µ–Ω `env_file: - .env` –¥–ª—è `wedding_web`
  - –î–æ–±–∞–≤–ª–µ–Ω –º–∞–ø–ø–∏–Ω–≥ `VITE_TELEGRAM_BOT_USERNAME: ${TELEGRAM_BOT_USERNAME}`
- `TVLobby.jsx` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `import.meta.env.VITE_TELEGRAM_BOT_USERNAME`
- –°–æ–∑–¥–∞–Ω `.env.example` –≤ –∫–æ—Ä–Ω–µ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–§–∞–π–ª—ã:**
- `.env` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
- `docker-compose.yml` ‚Äî –º–∞–ø–ø–∏–Ω–≥ –¥–ª—è web service
- `apps/web/src/components/TV/TVLobby.jsx`
- `.env.example`

---

### ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –£–ª—É—á—à–µ–Ω–∏–µ seed (–¥–≤–µ –∫–Ω–æ–ø–∫–∏)
**–¶–µ–ª—å:** –î–æ–±–∞–≤–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–π seed (–Ω–µ —É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ) + –ø–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å.

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- **Backend:**
  - –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `runSeed()` ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–µ–º–æ-–∫–≤–∏–∑ –ë–ï–ó —É–¥–∞–ª–µ–Ω–∏—è
  - –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `runFullReset()` ‚Äî —É–¥–∞–ª—è–µ—Ç –í–°–Å –∏ —Å–æ–∑–¥–∞—ë—Ç –¥–µ–º–æ
  - –§—É–Ω–∫—Ü–∏—è `createDemoQuiz()` ‚Äî –æ–±—â–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –¥–µ–º–æ-–∫–≤–∏–∑–∞
- **API:**
  - `POST /api/admin/seed` ‚Üí `runSeed()` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω—ã–π
  - `POST /api/admin/reset` ‚Üí `runFullReset()` ‚Äî –¥–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–π
- **Client:**
  - `adminApi.reseed()` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω—ã–π
  - `adminApi.fullReset()` ‚Äî –ø–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å
- **UI (Home.jsx):**
  - –î–≤–µ –∫–Ω–æ–ø–∫–∏: "‚ûï –î–æ–±–∞–≤–∏—Ç—å –¥–µ–º–æ-–∫–≤–∏–∑" (–∑–µ–ª—ë–Ω–∞—è), "‚ö†Ô∏è –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –ë–î" (–∫—Ä–∞—Å–Ω–∞—è)
  - –†–∞–∑–Ω—ã–µ confirm –¥–∏–∞–ª–æ–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏

**–§–∞–π–ª—ã:**
- `apps/api/src/services/seed-service.ts`
- `apps/api/src/routes/admin.ts`
- `apps/web/src/api/client.js`
- `apps/web/src/pages/Home.jsx`

---

### ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –í—ã–±–æ—Ä –∫–≤–∏–∑–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞ –Ω–∞ –¢–í
**–¶–µ–ª—å:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±—Ä–∞—Ç—å –∫–∞–∫–æ–π draft-–∫–≤–∏–∑ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –¢–í.

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ 2+ draft-–∫–≤–∏–∑–æ–≤ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∫–∞–∫–æ–π –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –¢–í.

**–†–µ—à–µ–Ω–∏–µ:**
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `displayedOnTv boolean NOT NULL DEFAULT false` –≤ —Ç–∞–±–ª–∏—Ü—É `quizzes`
  - –ú–∏–≥—Ä–∞—Ü–∏—è: `0003_gray_lily_hollister.sql`
- **API:**
  - Endpoint `POST /api/quizzes/:id/display-on-tv`
  - –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —Ñ–ª–∞–≥–∞ —É –æ–¥–Ω–æ–≥–æ –∫–≤–∏–∑–∞, —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —É –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
- **Client:**
  - `quizzesApi.displayOnTv(id)`
- **Layout.jsx:**
  - `refreshTvCode()` –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä—É–µ—Ç –∫–≤–∏–∑ —Å `displayedOnTv = true`
  - –§–æ–ª–ª–±–µ–∫: –ø–µ—Ä–≤—ã–π –Ω–µ–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–≤–∏–∑
- **Home.jsx:**
  - –î–æ–±–∞–≤–ª–µ–Ω state `displaying`
  - –î–æ–±–∞–≤–ª–µ–Ω handler `handleDisplayOnTv()`
  - **–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–æ–∫ –¥–ª—è draft-–∫–≤–∏–∑–æ–≤:**
    - –ï—Å–ª–∏ `displayedOnTv = false`: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "üì∫ –í—ã–≤–µ—Å—Ç–∏ –Ω–∞ —ç–∫—Ä–∞–Ω" (—Å–∏–Ω—è—è –∫–Ω–æ–ø–∫–∞)
    - –ï—Å–ª–∏ `displayedOnTv = true`: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å" (–æ—Ä–∞–Ω–∂–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞)
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π, —Ç–∞–∫ –∏ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–π –≤–µ—Ä—Å–∏–∏

**Workflow:**
1. –°–æ–∑–¥–∞–π—Ç–µ 2+ –∫–≤–∏–∑–∞ –≤ —Å—Ç–∞—Ç—É—Å–µ "–ß–µ—Ä–Ω–æ–≤–∏–∫"
2. –ù–∞–∂–º–∏—Ç–µ "üì∫ –í—ã–≤–µ—Å—Ç–∏ –Ω–∞ —ç–∫—Ä–∞–Ω" –Ω–∞ –Ω—É–∂–Ω–æ–º –∫–≤–∏–∑–µ
3. –ö–≤–∏–∑ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ –¢–í (—Å—Å—ã–ª–∫–∞ –≤ —Ö–µ–¥–µ—Ä–µ –æ–±–Ω–æ–≤–∏—Ç—Å—è)
4. –ö–Ω–æ–ø–∫–∞ –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ "‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å"
5. –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å" —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É

**–§–∞–π–ª—ã:**
- `apps/api/src/db/schema.ts` ‚Äî –Ω–æ–≤–æ–µ –ø–æ–ª–µ
- `apps/api/drizzle/0003_gray_lily_hollister.sql` ‚Äî –º–∏–≥—Ä–∞—Ü–∏—è
- `apps/api/src/routes/quizzes.ts` ‚Äî –Ω–æ–≤—ã–π endpoint
- `apps/web/src/api/client.js` ‚Äî –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
- `apps/web/src/components/Layout.jsx` ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω `refreshTvCode()`
- `apps/web/src/pages/Home.jsx` ‚Äî –Ω–æ–≤—ã–π handler –∏ UI

---

## –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –§–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã:
- `PLAN.md` ‚Äî –æ—Ç–º–µ—á–µ–Ω—ã —ç—Ç–∞–ø—ã 1-3 –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ, –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- `CLAUDE.md` ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω —Å–ø–∏—Å–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- `docs/API.md` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ endpoints:
  - `POST /quizzes/:id/display-on-tv`
  - `POST /admin/seed` (–æ–±–Ω–æ–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ)
  - `POST /admin/reset` (–Ω–æ–≤—ã–π)
- `docs/DATABASE.md` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `displayedOnTv` –≤ —Ç–∞–±–ª–∏—Ü—É `quizzes`
- `DONE.md` ‚Äî —Å–æ–∑–¥–∞–Ω —ç—Ç–æ—Ç —Ñ–∞–π–ª —Å –∏—Å—Ç–æ—Ä–∏–µ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

---

## –ò—Ç–æ–≥–æ –∑–∞ —Å–µ—Å—Å–∏—é

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- ‚úÖ –≠—Ç–∞–ø 1: –£–¥–∞–ª–µ–Ω–∏–µ OCR
- ‚úÖ –≠—Ç–∞–ø 2: –£–ª—É—á—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –≠—Ç–∞–ø 3: –£–ª—É—á—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è bot username —á–µ—Ä–µ–∑ .env
- ‚úÖ –î–≤–µ –∫–Ω–æ–ø–∫–∏ seed (–±–µ–∑–æ–ø–∞—Å–Ω–∞—è + –ø–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å)
- ‚úÖ –í—ã–±–æ—Ä –∫–≤–∏–∑–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞ –Ω–∞ –¢–í

**–°–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã** (—Å–º. PLAN.md):
- –≠—Ç–∞–ø 4: Web TV + Admin ‚Äî –º–µ—Å—Ç–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –∏–∑ –∞–¥–º–∏–Ω–∫–∏
- –≠—Ç–∞–ø 5: Telegram Bot ‚Äî –∫–∞–ø–∏—Ç–∞–Ω—ã –ø–æ–ª—É—á–∞—é—Ç –≤–æ–ø—Ä–æ—Å —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–ª–∞–π–¥–µ —Ç–∞–π–º–µ—Ä–∞
- –≠—Ç–∞–ø 6: API ‚Äî —É–ª—É—á—à–∏—Ç—å –æ—Ü–µ–Ω–∫—É —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- –≠—Ç–∞–ø 7: –°–ª–∞–π–¥—ã "–°–ø–∞—Å–∏–±–æ" –≤ –∫–æ–Ω—Ü–µ –∫–≤–∏–∑–∞
- –≠—Ç–∞–ø 8: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª–∞–π–¥—ã –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏ (—à—É—Ç–∫–∏, mp4)
- –≠—Ç–∞–ø 9: –£–ª—É—á—à–∏—Ç—å seed Demo quiz
